document.addEventListener("DOMContentLoaded",()=>{if(0!==$(".index__banner .swiper-container").length){let e="horizontal";blogDiv.IS_MOBILE||2!==$(".index__banner-recommend .item").length||(e="vertical"),new Swiper(".swiper-container",{keyboard:!1,direction:e,loop:!0,autoplay:!0,mousewheel:!0,pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}{const e=e=>"default"===e.mode?`\n<li class="list__item wow default">\n<div class="line"></div>\n<a href="${e.permalink}"class="thumbnail"title="${e.title}"target="_blank"rel="noopener noreferrer">\n<img width="100%"height="100%"class="lazyload"src="${e.lazyload}"data-src="${e.image[0]}"alt="${e.title}"/>\n<time datetime="${e.time}">${e.time}</time>\n</a>\n<div class="information">\n<a href="${e.permalink}"class="title"title="${e.title}"target="_blank"rel="noopener noreferrer">\n<span class="badge"style="display: ${"sticky"===e.type?"inline-block":"none"}">置顶</span>${e.title}\n</a>\n<a class="abstract"href="${e.permalink}"title="文章摘要"target="_blank"rel="noopener noreferrer">${e.abstract}</a>\n<div class="meta">\n<ul class="items">\n<li>${e.created}</li>\n<li>${e.views}阅读</li>\n<li>${e.commentsNum}评论</li>\n<li>${e.agree}点赞</li>\n</ul>\n<div class="last"style="display: ${e.category.length?"flex":"none"}">\n<svg class="icon"viewBox="0 0 1024 1024"xmlns="http://www.w3.org/2000/svg"width="15"height="15"><path d="M512.2 564.743a76.818 76.818 0 0 1-30.973-6.508L108.224 393.877c-26.105-11.508-42.56-35.755-42.927-63.272-.384-27.44 15.356-52.053 41.042-64.232l373.004-176.74c20.591-9.737 45.16-9.755 65.75.017L917.68 266.39c25.668 12.188 41.39 36.792 41.024 64.231-.384 27.5-16.821 51.73-42.908 63.237l-372.57 164.377a77.18 77.18 0 0 1-31.025 6.508zM139.843 329.592l370.213 163.241c1.291.56 3.018.567 4.345-.009l369.758-163.128-369.706-175.464v-.01c-1.326-.628-3.158-.636-4.502 0l-370.108 175.37zm748.015 1.858h.175-.175zM512.376 941.674c-10.348 0-20.8-2.32-30.537-6.997L121.05 778.624c-18.113-7.834-26.454-28.87-18.62-46.983 7.835-18.112 28.862-26.488 46.993-18.61l362.08 156.629 345.26-156.366c17.939-8.166 39.14-.253 47.324 17.746 8.166 17.964.227 39.157-17.729 47.324l-344.51 156.61c-9.196 4.449-19.281 6.7-29.471 6.7z"fill="#444"/><path d="M871.563 515.449L511.81 671.775 152.358 515.787v73.578a34.248 34.248 0 0 0 20.76 31.48l301.518 129.19c11.806 5.703 24.499 8.546 37.175 8.546s25.367-2.843 37.174-8.546L850.82 620.534a34.248 34.248 0 0 0 20.744-31.474V515.45z"fill="#ff6a18"/></svg>\n<a class="link"target="_blank"rel="noopener noreferrer"href="${e.category.length&&e.category[0].permalink}">${e.category.length&&e.category[0].name}</a>\n</div>\n</div>\n</div>\n</li>\n`:"single"===e.mode?`\n<li class="list__item wow single">\n<div class="line"></div>\n<div class="information">\n<a href="${e.permalink}"class="title"title="${e.title}"target="_blank"rel="noopener noreferrer">\n<span class="badge"style="display: ${"sticky"===e.type?"inline-block":"none"}">置顶</span>${e.title}\n</a>\n<div class="meta">\n<ul class="items">\n<li>${e.created}</li>\n<li>${e.views}阅读</li>\n<li>${e.commentsNum}评论</li>\n<li>${e.agree}点赞</li>\n</ul>\n<div class="last"style="display: ${e.category.length?"flex":"none"}">\n<svg class="icon"viewBox="0 0 1024 1024"xmlns="http://www.w3.org/2000/svg"width="15"height="15"><path d="M512.2 564.743a76.818 76.818 0 0 1-30.973-6.508L108.224 393.877c-26.105-11.508-42.56-35.755-42.927-63.272-.384-27.44 15.356-52.053 41.042-64.232l373.004-176.74c20.591-9.737 45.16-9.755 65.75.017L917.68 266.39c25.668 12.188 41.39 36.792 41.024 64.231-.384 27.5-16.821 51.73-42.908 63.237l-372.57 164.377a77.18 77.18 0 0 1-31.025 6.508zM139.843 329.592l370.213 163.241c1.291.56 3.018.567 4.345-.009l369.758-163.128-369.706-175.464v-.01c-1.326-.628-3.158-.636-4.502 0l-370.108 175.37zm748.015 1.858h.175-.175zM512.376 941.674c-10.348 0-20.8-2.32-30.537-6.997L121.05 778.624c-18.113-7.834-26.454-28.87-18.62-46.983 7.835-18.112 28.862-26.488 46.993-18.61l362.08 156.629 345.26-156.366c17.939-8.166 39.14-.253 47.324 17.746 8.166 17.964.227 39.157-17.729 47.324l-344.51 156.61c-9.196 4.449-19.281 6.7-29.471 6.7z"fill="#444"/><path d="M871.563 515.449L511.81 671.775 152.358 515.787v73.578a34.248 34.248 0 0 0 20.76 31.48l301.518 129.19c11.806 5.703 24.499 8.546 37.175 8.546s25.367-2.843 37.174-8.546L850.82 620.534a34.248 34.248 0 0 0 20.744-31.474V515.45z"fill="#ff6a18"/></svg>\n<a class="link"target="_blank"rel="noopener noreferrer"href="${e.category.length&&e.category[0].permalink}">${e.category.length&&e.category[0].name}</a>\n</div>\n</div>\n</div>\n<a href="${e.permalink}"class="thumbnail"title="${e.title}"target="_blank"rel="noopener noreferrer">\n<img width="100%"height="100%"class="lazyload"src="${e.lazyload}"data-src="${e.image[0]}"alt="${e.title}"/>\n<time datetime="${e.time}">${e.time}</time>\n<svg viewBox="0 0 1024 1024"xmlns="http://www.w3.org/2000/svg"width="20"height="20"><path d="M903.93 107.306H115.787c-51.213 0-93.204 42.505-93.204 93.72V825.29c0 51.724 41.99 93.717 93.717 93.717h788.144c51.72 0 93.717-41.993 93.717-93.717V201.025c-.512-51.214-43.017-93.719-94.23-93.719zm-788.144 64.527h788.657c16.385 0 29.704 13.316 29.704 29.704v390.229L760.54 402.285c-12.805-13.828-30.217-21.508-48.14-19.971-17.924 1.02-34.821 10.754-46.602 26.114l-172.582 239.16-87.06-85.52c-12.29-11.783-27.654-17.924-44.039-17.924-16.39.508-31.755 7.676-43.53 20.48L86.595 821.705V202.05c-1.025-17.416 12.804-30.73 29.191-30.217zm788.145 683.674H141.906l222.255-245.82 87.06 86.037c12.8 12.807 30.212 18.95 47.115 17.417 17.41-1.538 33.797-11.266 45.063-26.118l172.584-238.647 216.111 236.088 2.051-1.54V825.8c.509 16.39-13.315 29.706-30.214 29.706zm0 0"/><path d="M318.072 509.827c79.89 0 144.417-65.037 144.417-144.416 0-79.378-64.527-144.925-144.417-144.925-79.891 0-144.416 64.527-144.416 144.412 0 79.892 64.525 144.93 144.416 144.93zm0-225.327c44.553 0 80.912 36.362 80.912 80.91 0 44.557-35.847 81.43-80.912 81.43-45.068 0-80.916-36.36-80.916-80.915 0-44.556 36.872-81.425 80.916-81.425zm0 0"/></svg>\n</a>\n<div class="information"style="margin-bottom: 0;">\n<a class="abstract"href="${e.permalink}"title="文章摘要"target="_blank"rel="noopener noreferrer">${e.abstract}</a>\n</div>\n</li>\n`:"multiple"===e.mode?`\n<li class="list__item wow multiple">\n<div class="line"></div>\n<div class="information">\n<a href="${e.permalink}"class="title"title="${e.title}"target="_blank"rel="noopener noreferrer">\n<span class="badge"style="display: ${"sticky"===e.type?"inline-block":"none"}">置顶</span>${e.title}\n</a>\n<a class="abstract"href="${e.permalink}"title="文章摘要"target="_blank"rel="noopener noreferrer">${e.abstract}</a>\n</div>\n<a href="${e.permalink}"class="thumbnail"title="${e.title}"target="_blank"rel="noopener noreferrer">\n ${e.image.map((l,t)=>{if(t<3)return`<img width="100%"height="100%"class="lazyload"src="${e.lazyload}"data-src="${l}"alt="${e.title}"/>`}).join("")}\n</a>\n<div class="meta">\n<ul class="items">\n<li>${e.created}</li>\n<li>${e.views}阅读</li>\n<li>${e.commentsNum}评论</li>\n<li>${e.agree}点赞</li>\n</ul>\n<div class="last"style="display: ${e.category.length?"flex":"none"}">\n<svg class="icon"viewBox="0 0 1024 1024"xmlns="http://www.w3.org/2000/svg"width="15"height="15"><path d="M512.2 564.743a76.818 76.818 0 0 1-30.973-6.508L108.224 393.877c-26.105-11.508-42.56-35.755-42.927-63.272-.384-27.44 15.356-52.053 41.042-64.232l373.004-176.74c20.591-9.737 45.16-9.755 65.75.017L917.68 266.39c25.668 12.188 41.39 36.792 41.024 64.231-.384 27.5-16.821 51.73-42.908 63.237l-372.57 164.377a77.18 77.18 0 0 1-31.025 6.508zM139.843 329.592l370.213 163.241c1.291.56 3.018.567 4.345-.009l369.758-163.128-369.706-175.464v-.01c-1.326-.628-3.158-.636-4.502 0l-370.108 175.37zm748.015 1.858h.175-.175zM512.376 941.674c-10.348 0-20.8-2.32-30.537-6.997L121.05 778.624c-18.113-7.834-26.454-28.87-18.62-46.983 7.835-18.112 28.862-26.488 46.993-18.61l362.08 156.629 345.26-156.366c17.939-8.166 39.14-.253 47.324 17.746 8.166 17.964.227 39.157-17.729 47.324l-344.51 156.61c-9.196 4.449-19.281 6.7-29.471 6.7z"fill="#444"/><path d="M871.563 515.449L511.81 671.775 152.358 515.787v73.578a34.248 34.248 0 0 0 20.76 31.48l301.518 129.19c11.806 5.703 24.499 8.546 37.175 8.546s25.367-2.843 37.174-8.546L850.82 620.534a34.248 34.248 0 0 0 20.744-31.474V515.45z"fill="#ff6a18"/></svg>\n<a class="link"target="_blank"rel="noopener noreferrer"href="${e.category.length&&e.category[0].permalink}">${e.category.length&&e.category[0].name}</a>\n</div>\n</div>\n</li>\n`:`\n<li class="list__item wow none">\n<div class="line"></div>\n<div class="information">\n<a href="${e.permalink}"class="title"title="${e.title}"target="_blank"rel="noopener noreferrer">\n<span class="badge"style="display: ${"sticky"===e.type?"inline-block":"none"}">置顶</span>${e.title}\n</a>\n<a class="abstract"href="${e.permalink}"title="文章摘要"target="_blank"rel="noopener noreferrer">${e.abstract}</a>\n<div class="meta">\n<ul class="items">\n<li>${e.created}</li>\n<li>${e.views}阅读</li>\n<li>${e.commentsNum}评论</li>\n<li>${e.agree}点赞</li>\n</ul>\n<div class="last"style="display: ${e.category.length?"flex":"none"}">\n<svg class="icon"viewBox="0 0 1024 1024"xmlns="http://www.w3.org/2000/svg"width="15"height="15"><path d="M512.2 564.743a76.818 76.818 0 0 1-30.973-6.508L108.224 393.877c-26.105-11.508-42.56-35.755-42.927-63.272-.384-27.44 15.356-52.053 41.042-64.232l373.004-176.74c20.591-9.737 45.16-9.755 65.75.017L917.68 266.39c25.668 12.188 41.39 36.792 41.024 64.231-.384 27.5-16.821 51.73-42.908 63.237l-372.57 164.377a77.18 77.18 0 0 1-31.025 6.508zM139.843 329.592l370.213 163.241c1.291.56 3.018.567 4.345-.009l369.758-163.128-369.706-175.464v-.01c-1.326-.628-3.158-.636-4.502 0l-370.108 175.37zm748.015 1.858h.175-.175zM512.376 941.674c-10.348 0-20.8-2.32-30.537-6.997L121.05 778.624c-18.113-7.834-26.454-28.87-18.62-46.983 7.835-18.112 28.862-26.488 46.993-18.61l362.08 156.629 345.26-156.366c17.939-8.166 39.14-.253 47.324 17.746 8.166 17.964.227 39.157-17.729 47.324l-344.51 156.61c-9.196 4.449-19.281 6.7-29.471 6.7z"fill="#444"/><path d="M871.563 515.449L511.81 671.775 152.358 515.787v73.578a34.248 34.248 0 0 0 20.76 31.48l301.518 129.19c11.806 5.703 24.499 8.546 37.175 8.546s25.367-2.843 37.174-8.546L850.82 620.534a34.248 34.248 0 0 0 20.744-31.474V515.45z"fill="#ff6a18"/></svg>\n<a class="link"target="_blank"rel="noopener noreferrer"href="${e.category.length&&e.category[0].permalink}">${e.category.length&&e.category[0].name}</a>\n</div>\n</div>\n</div>\n</li>\n`;let l={page:1,pageSize:window.blogDiv.PAGE_SIZE,type:"created"};const t=()=>{$(".index__list .list").html(""),$(".load").show();let e=$('.index__title-title .item[data-type="'+l.type+'"]'),t=$(".index__title-title .line");e.addClass("active").siblings().removeClass("active"),t.css({width:e.width()})},a=()=>new Promise((t,a)=>{});t(),a(),$(".index__title-title .item").on("click",async function(){$(this).attr("data-type")!==l.type&&(l={page:1,pageSize:window.blogDiv.PAGE_SIZE,type:$(this).attr("data-type")},t(),a())}),$(".load").on("click",async function(){if($(this).attr("loading"))return;l.page++;let e=await a();e=$(".index__list .list .list__item").length-e;const t=`.index__list.list.list__item:nth-child(${e})`,n=$(t).offset().top-$(".header").height();window.scrollTo({top:n-15,behavior:"smooth"})})}{const e=$(".index__list").attr("data-wow");"off"!==e&&e&&new WOW({boxClass:"wow",animateClass:`animated ${e}`,offset:0,mobile:!0,live:!0,scrollContainer:null}).init()}});document.addEventListener("DOMContentLoaded",()=>{localStorage.getItem("data-night")?"":($("html").removeAttr("data-night")),$(".action_item.mode").on("click",()=>{localStorage.getItem("data-night")?($("html").removeAttr("data-night"),localStorage.removeItem("data-night")):($("html").attr("data-night","night"),localStorage.setItem("data-night","night"))}),blogDiv.IS_MOBILE||"off"===blogDiv.DYNAMIC_BACKGROUND||!blogDiv.DYNAMIC_BACKGROUND||blogDiv.WALLPAPER_BACKGROUND_PC,$(".header__above-search .input").on("click",e=>{e.stopPropagation(),$(".header__above-search .result").addClass("active")}),$(document).on("click",function(){$(".header__above-search .result").removeClass("active")}),$(".dropdown").each(function(e,t){const o=$(this).find(".dropdown__menu"),a=$(t).attr("trigger")||"click",n=$(t).attr("placement")||$(this).height()||0;o.css("top",n),"hover"===a?$(this).hover(()=>$(this).addClass("active"),()=>$(this).removeClass("active")):($(this).on("click",function(e){$(this).toggleClass("active"),$(document).one("click",()=>$(this).removeClass("active")),e.stopPropagation()}),o.on("click",e=>e.stopPropagation()))});{let e=null;const t=()=>(document.documentElement.scrollTop||document.body.scrollTop)>300?$(".action_item.scroll").addClass("active"):$(".action_item.scroll").removeClass("active");t(),$(document).on("scroll",()=>{clearTimeout(e),e=setTimeout(t,80)}),$(".action_item.scroll").on("click",()=>window.scrollTo({top:0,behavior:"smooth"}))}console.log("DOM fully loaded and parsed:+");if($(".comment").length){let e=!1;$(".comment-respond-form button").on("click",function(t){$(".comment-respond-form .foot").css("display","none");$(".comment-respond-form .foot span").html("");t.preventDefault();const o="/api/content/posts/comments/",a=$(".comment-respond-form").attr("posts"),n=$(".comment-respond-form").attr("parent-id"),i=$(".comment-respond-form .head input[name='author']").val(),c=$(".comment-respond-form .head input[name='mail']").val(),r=$(".comment-respond-form input:radio:checked ").val();let d=$(".comment-respond-form  textarea[name='text']").val();let nt=true;if(i.trim()==''||c.trim()==''||d.trim()==''){$(".comment-respond-form  .foot").css("display","block");$(".comment-respond-form  .foot span").html("请先输入完整的评论信息！");return false}if(!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(c)){$(".comment-respond-form  .foot").css("display","block");$(".comment-respond-form  .foot span").html("请输入正确的邮箱！");return false}if(!r){$(".comment-respond-form  .foot").css("display","block");$(".comment-respond-form  .foot span").html("请选择邮件回复提醒！");return false}else{r=="1"?nt=true:nt=false}$.ajax({url:o,type:"POST",contentType:"application/json",data:JSON.stringify({"author":i,"email":c,"content":d,"parentId":n,"postId":a,"allowNotification":nt,}),dataType:"text",success(t){$(".comment-respond-form  .foot").css("border","1px solid var(--theme)").css("color","var(--theme)").css("display","block");$(".comment-respond-form  .foot span").html("发送成功，留言将在审核后展示")},error(){$(".comment-respond-form  .foot").css("display","block");$(".comment-respond-form  .foot span").html("发送失败！请刷新后重试！！")}})})}if($(".comment-list__item .term .content .user .author a").each((e,t)=>$(t).attr("target","_blank")),$(".comment .pagination a").each((e,t)=>{const o=$(t).attr("href");o&&o.includes("#")&&$(t).attr("href",o.replace("#comments","?scroll=comment"))}),blogDiv.DOCUMENT_TITLE){const e=document.title;document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState?document.title=blogDiv.DOCUMENT_TITLE:document.title=e})}$(".header__above-slideicon").on("click",function(){$(".header__searchout").removeClass("active"),$(".header__slideout").hasClass("active")?($("body").css("overflow",""),$(".header__mask").removeClass("active slideout"),$(".header__slideout").removeClass("active")):($("body").css("overflow","hidden"),$(".header__mask").addClass("active slideout"),$(".header__slideout").addClass("active"))}),$(".header__above-searchicon").on("click",function(){$(".header__slideout").removeClass("active"),$(".header__searchout").hasClass("active")?($("body").css("overflow",""),$(".header__mask").removeClass("active slideout"),$(".header__searchout").removeClass("active")):($("body").css("overflow","hidden"),$(".header__mask").addClass("active"),$(".header__searchout").addClass("active"))}),$(".header__mask").on("click",function(){$("body").css("overflow",""),$(".header__mask").removeClass("active slideout"),$(".header__searchout").removeClass("active"),$(".header__slideout").removeClass("active")}),$(".header__slideout-menu .current").parents(".panel-body").show().siblings(".panel").addClass("in"),$(".header__slideout-menu .panel").on("click",function(){const e=$(this).parent().parent();e.find(".panel").not($(this)).removeClass("in"),e.find(".panel-body").not($(this).siblings(".panel-body")).stop().hide("fast"),$(this).toggleClass("in").siblings(".panel-body").stop().toggle("fast")});if(!window.blogDiv.IS_MOBILE){let e=!0;const t=t=>{if(window.pageYOffset>=$(".header").height()&&t<=0){if(e)return;$(".header").addClass("active"),$(".aside .aside__item:last-child").css("top",$(".header").height()-60+2),e=!0}else{if(!e)return;$(".header").removeClass("active"),$(".aside .aside__item:last-child").css("top",$(".header").height()+2),e=!1}};let o=window.pageYOffset;t(o);let a=Date.now();document.addEventListener("scroll",()=>{let e=Date.now();e-a>15&&(t(o-window.pageYOffset),o=window.pageYOffset),a=e})}});window.addEventListener('load',function(event){console.log("img loaded");if($(".comment-respond-form").attr("posts")){$.ajax({url:'/api/content/posts/'+$(".comment-respond-form").attr("posts")+"/comments",type:"GET",success(t){var arr=t.data.content;if(arr.length>0){let msgStr='<div><ul class="index__title-title"> <li class="item active" data-type="created">精选留言</li> <li class="line" style="width: 60px;"></li> </ul> </div>';arr.forEach(function(item,index){msgStr+='<div  class="comment-items" ><div class="comment-item"> <div class="comment-item-main"> <div class="comment-item-header"><span class="header-author">';msgStr+='<a href="javascript:void(0)">'+item.author+'</a></span><span class="header-time">';msgStr+=getTime(item.createTime)+'</span><span id="" class="header-id"> '+(index+1)+'楼</span></div>';msgStr+='<div class="comment-item-content"><p>'+item.content+'</p></div>';if(item.hasChildren){msgStr+='<div class="comment-item-controls"><ul><li><span class="item-control-reply">'+item.replay+'</span></li></ul></div>'}msgStr+='</div></div></div>'});$(".comment .body").html(msgStr)}},error(){$(".comment-respond-form  .foot").css("display","block");$(".comment-respond-form  .foot span").html("获取留言数据失败，请刷新后浏览")}})}});function getTime(datetime){var ct=(new Date().getTime()-datetime)/1000;if(ct>31104000){return parseInt(ct/31104000)+"年前"}else if(ct>2592000){return parseInt(ct/2592000)+"月前"}else if(ct>86400*2){return parseInt(ct/86400)+"天前"}else if(ct>3600){return parseInt(ct/3600)+"小时前"}else if(ct>60){return parseInt(ct/60)+"分钟前"}else{return"刚刚"}}function showValiate(){if($('.comment-respond-form .head input').hasClass('hidden')){$('.comment-respond-form .head input').removeClass('hidden');$('.comment-respond-form .head  div').addClass('show_inline');$('.comment-respond-form .head div,.comment-respond-form .head input').addClass('show_infos')}}